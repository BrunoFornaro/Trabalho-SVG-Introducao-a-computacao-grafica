<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset=UTF-8">
	<!-- CSS -->
	<link rel="stylesheet" href="style.css" />
</head>

<body>

	<div class="botoes-paginas">
		<a href="index.html">Parte 1</a>
		<a href="parte_2.html">Parte 2</a>
		<a href="parte_3.html">Parte 3</a>
		<a href="parte_4.html">Parte 4</a>
		<a href="parte_5.html">Parte 5</a>
		<a href="parte_6.html">Parte 6</a>
		<a href="parte_7.html">Parte 7</a>
	</div>


	<h3>Terminando o primeiro movimento</h3>

	<p>A diferença da ultima etapa para esta não é grande, mas tem mais um nível de evolução no desenvolmento da animação.</p>
	<p>Ao ver a imagem da etapa anterior, acredito que nota-se rapidamente que o movimento do pedal ainda estava muito errado, apenas parte do pedal se movimentava (além de estar rotacionando no sentido errado).</p>
	<p>Agora foi corrigido o sentido da rotação, mas além disso, é possível ver que os pedais em si (a parte onde fica apoiado o pé de fato) transladam junto das hastes do pedal.</p>
	
	
	<svg class="bike" id="bike" width=400 height=400 style="border:2px solid gray">

		<!-- Rodas -->
		<circle cx=100 cy=120 r=50 />
		<circle cx=300 cy=120 r=50 />

		<!-- Estrado -->
		<line x1=100 y1=120 x2=180 y2=120 />
		<line x1=100 y1=120 x2=150 y2=210 />
		<line x1=180 y1=120 x2=140 y2=240 />
		<line x1=150 y1=210 x2=270 y2=210 />
		<line x1=180 y1=120 x2=270 y2=210 />
		<line x1=300 y1=120 x2=260 y2=240 />


		<!-- Guidão -->
		<line x1=300 y1=240 x2=260 y2=240 />
		<path d="M300 240 C 325,240 325,210 300,210" />

		<!-- Banco -->
		<line x1=120 y1=240 x2=160 y2=240 />


		<!-- Pedais - Eixo -->
		<circle cx=180 cy=120 r=10 />
		<g id="pedais">

			<!-- Pedais - Pedal 1 -->
			<line id="haste-1" x1=180 y1=120 x2=180 y2=160 />
			<line id="pedal_1" x1=170 y1=160 x2=190 y2=160 />


			<!-- Pedais - Pedal 2 -->
			<line x1=180 y1=120 x2=180 y2=80 />
			<line id="pedal_2" x1=170 y1=80 x2=190 y2=80 />

		</g>
	</svg>
	
	<p>Na realidade a tranformação que está sendo feita não é uma translação, mas duas rotações. As hastes e os pedais foram envolvidos em uma "sub imagem" SVG, para que estes rotacionassem todos juntos no sentido horário. Porém, conforme essa sub imagem rotaciona um grau no sentido horário, cada um dos pedais rotaciona um grau no sentido anti-horário, dando assim o efeito de translação. O eixo da primeira rotação é o centro do eixo dos pedais, e da segunda rotação são as respectivas extremidades das hastes.</p>
	
	<br>
	<p>Esboço para o cálculo da rotação dos pedais:</p>
	<img class="rascunhos" src="imagens/Rotação do pedal.jpg" alt="Cálculo rotação dos pedais">

	<br>

	<div class="botoes-paginas">
		<a href="parte_2.html">Parte 2</a>
		<a href="parte_4.html">Parte 4</a>
	</div>

	<script>

		setInterval(function () {
			let novaHora = new Date();
			// getHours trará a hora
			// geMinutes trará os minutos
			// getSeconds trará os segundos
			let hora = novaHora.getHours();
			let minuto = novaHora.getMinutes();
			let segundo = novaHora.getSeconds();
			// Chamamos a função zero para que ela retorne a concatenação
			// com os minutos e segundos
			minuto = zero(minuto);
			segundo = zero(segundo);
			// Com o textContent, iremos inserir as horas, minutos e segundos
			// no nosso elemento HTML
			document.getElementById('hora').textContent = hora + ':' + minuto + ':' + segundo;
		}, 1000)


		function zero(x) {
			if (x < 10) {
				x = '0' + x;
			} return x;
		}

		var moveSlider = function (slider, direction) {
			var value = slider.value;
			var rectSVG = document.getElementById('rect-svg');
			rectSVG.setAttributeNS(null, direction, value * 4);
		}




		var pedais = document.getElementById("pedais");
		var pedal_1 = document.getElementById("pedal_1");
		var pedal_2 = document.getElementById("pedal_2");

		var i = 0;

		function rotate() {
			/*
			haste.setAttribute("transform", "rotate(" + (i++) + ",180,120)");
			pedal.setAttribute("transform", "rotate(" + (i++) + ",180,120)");
			pedal.setAttribute("transform", "rotate(" + (i++) + ",180,160)");
			*/
			pedais.setAttribute("transform", "rotate(" + (i--) + ",180,120)");
			pedal_1.setAttribute("transform", "rotate(" + (-i) + ",180,160)");
			pedal_2.setAttribute("transform", "rotate(" + (-i) + ",180,80)");

			setTimeout(rotate, 10);

		}


		rotate();

	</script>

</body>


</html>