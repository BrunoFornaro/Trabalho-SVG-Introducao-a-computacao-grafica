<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset=UTF-8">
	<!-- CSS -->
	<link rel="stylesheet" href="style.css" />
</head>

<body>
	<div class="botoes-paginas">
		<a href="index.html">Parte 1</a>
		<a href="parte_2.html">Parte 2</a>
		<a href="parte_3.html">Parte 3</a>
		<a href="parte_4.html">Parte 4</a>
		<a href="parte_5.html">Parte 5</a>
		<a href="parte_6.html">Parte 6</a>
		<a href="parte_7.html">Parte 7</a>
	</div>


	<h3>Primeira animação</h3>
	<p>Vamos dizer que a parte fácil já foi (por mais que não tenha sido fácil de verdade).</p>
	<p>Agora que já foi feita a primeira imagem estática, chegou a hora de começar a tentar animá-la. Nesse momento, me deparei com dois caminhos que eu poderia seguir, considerando que o trabalho está sendo feito no HTML "raíz":</p>
	<ul>
		<li>Utilizar o CSS para animar a imagem</li>
		<li>Animar a o SVG com JavaScript</li>
	</ul>
	<p>Eu nunca tinha tentado animar uma imagem SVG de nenhuma das duas maneiras, mas enquanto pesquisei, vi que para o que eu queria o JavaScript poderia ser uma melhor solução. Pelo JS eu teria mais liberdade para escolher quantos quadros por segundo a animação teria e alterar isso fácilmente, assim como a velocidade de cada movimento individualmente. Além disso, pelo que eu notei no CSS seria necessário fazer boa parte das transformações na mão uma a uma, sem aproveitar muito código e com pouca liberdade para deixar os cálculos para a máquina. Já no JS, eu poderia fazer funções e um código que calcularia as transformações de acordo com o passar do tempo.</p>
	<p>Eu já afirmei acima que é possível, mas o primeiro passo para que eu visse se era possivel fazer o que eu queria com o JS no HTML era ver se eu tinha como implementar uma função que reconhecesse o passar do tempo e que houvesse alguma forma de manipular os atributos dos elementos HMTL e SVG pelo JS.</p>
	<p>Para essa primeira etapa, depois de algum tempo pesquisando consegui encontar exemplos que implementavam um relógio como o a seguir:</p>
	<p id="hora"></p>
	<p>Com isso, já pude analisar o código e ver que tem como identificar as horas, minutos e segundos atuais pelo JS. Após isso, também descobri outras formas de lidar com o tempo que seriam mais úteis.</p>
	<p>Depois de muito esforço, conseguir fazer o primeiro movimento no desenho conforme eu desejava. Na imagem abaixo está a bicicleta do etapa anterior, agora com uma parte dos pedais rotacionando:</p>

	<svg class="bike" id="bike" width=400 height=400 style="border:2px solid gray">

		<!-- Rodas -->
		<circle cx=100 cy=120 r=50 />
		<circle cx=300 cy=120 r=50 />

		<!-- Estrado -->
		<line x1=100 y1=120 x2=180 y2=120 />
		<line x1=100 y1=120 x2=150 y2=210 />
		<line x1=180 y1=120 x2=140 y2=240 />
		<line x1=150 y1=210 x2=270 y2=210 />
		<line x1=180 y1=120 x2=270 y2=210 />
		<line x1=300 y1=120 x2=260 y2=240 />


		<!-- Guidão -->
		<line x1=300 y1=240 x2=260 y2=240 />
		<path d="M300 240 C 325,240 325,210 300,210" />

		<!-- Banco -->
		<line x1=120 y1=240 x2=160 y2=240 />


		<!-- Pedais - Eixo -->
		<circle cx=180 cy=120 r=10 />

		<!-- Pedais - Pedal 1 -->
		<line id="haste-1" x1=180 y1=120 x2=180 y2=160 />
		<line x1=170 y1=160 x2=190 y2=160 />

		<!-- Pedais - Pedal 2 -->
		<line x1=180 y1=120 x2=180 y2=80 />
		<line x1=170 y1=80 x2=190 y2=80 />
	</svg>

	
	<script>

		setInterval(function () {
			let novaHora = new Date();
			// getHours trará a hora
			// geMinutes trará os minutos
			// getSeconds trará os segundos
			let hora = novaHora.getHours();
			let minuto = novaHora.getMinutes();
			let segundo = novaHora.getSeconds();
			// Chamamos a função zero para que ela retorne a concatenação
			// com os minutos e segundos
			minuto = zero(minuto);
			segundo = zero(segundo);
			// Com o textContent, iremos inserir as horas, minutos e segundos
			// no nosso elemento HTML
			document.getElementById('hora').textContent = hora + ':' + minuto + ':' + segundo;
		}, 1000)


		function zero(x) {
			if (x < 10) {
				x = '0' + x;
			} return x;
		}

		var moveSlider = function (slider, direction) {
			var value = slider.value;
			var rectSVG = document.getElementById('rect-svg');
			rectSVG.setAttributeNS(null, direction, value * 4);
		}




		var skyline = document.getElementById("haste-1");

		var angle = 0,
			finalAngle = angle + 100;

		var i = 0;

		function rotate() {
			skyline.setAttribute("transform", "rotate(" + (i++) + ",180,120)");
			setTimeout(rotate, 10);
		}


		rotate();

	</script>

	<p>Foi aplicada uma rotação no elemento da linha nessa parte do pedal da bicicleta, incrementando o ângulo de rotação conforme passa o tempo, com centro da rotação no ponto central do eixo do pedal.</p>

	<br>

	<div class="botoes-paginas">
		<a href="parte_1.html">Parte 1</a>
		<a href="parte_3.html">Parte 2</a>
	</div>
</body>


</html>